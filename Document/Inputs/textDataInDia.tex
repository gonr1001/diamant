\chapter[Description du fichier $.dia$ de sauvegarde]{Description du fichier $.dia$ de sauvegarde de projet de \diamant{} 1.5}

La sauvegarde d'un projet sous \dx{} se fait essentiellement à
travers un fichier $.dia$. Dans ce fichier sont stockés différents
types d'information du projet. Les types sont séparés entre eux
par le séparateur suivant~:

\verb!=================================!

 Ce fichier comporte six
types de données structurés comme suit~:


\begin{enumerate}
    \item Version du logiciel,
    \item Emplacement de la grille horaire utilisée,
    \item Données relatives aux enseignants,
    \item Données relatives aux locaux,
    \item Données relatives aux activités,
    \item Données relatives aux étudiants.
\end{enumerate}

\section{Version du logiciel}
Le premier type de données du fichier $.dia$ est une chaîne de
caractères sur une ligne indiquant la version du logiciel.

\section{Emplacement de la grille horaire}
Le second type de données du fichier $.dia$ est une chaîne de
caractères indiquant l'emplacement du fichier $.xml$ contenant la
structure de la grille horaire.

\section{Données relatives aux enseignants}
Le troisième type de données du fichier $.dia$ représente la
disponibilité des enseignants, les données sont décrites dans la
section \ref{instructor}. Mais, dans la sauvegarde le nombre de
périodes de la disponibilité est égal au nombre de périodes de la
grille horaire.

\section{Données relatives aux locaux}
Le quatrième type de données du fichier $.dia$ représente les
caractéristiques des locaux (voir section \ref{room} pour plus de
details), ainsi que leur disponibilité (nouveaux champs rajoutés à
ceux décrits à la section \ref{room}).

\subsection{Exemple des données qu'il contient}

\begin{verbatim}
C2-1007;21;212;08,11,14,57;laboratoire de chimie;1 1 1 1 1 1 1 1 1
1 1 1, \\
1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1
1 1 1 1,  \\
1 1 1 1 1 1 1 1 1 1 1 1;  \\
C1-2018;10;212;11;Matériaux composites;1 1 1 1 1 1 1 1 1 1 1 1, 1
1 1 1 1 1 1 1 1 1 1 1, \\
1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1
1 1 1 1; \\
C1-3014;25;211;11;Laboratoire mécatronique;1 1 1 1 1 1 1 1 1 1 1
1, \\
1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1
1 1 1 1, \\
1 1 1 1 1 1 1 1 1 1 1 1; C1-3027;15;211;11;Petit laboratoire de
communication pour élect; 1 1 1 1 1 1 1 1 1 1 1 1,1 1 1 1 1 1 1 1
1 1 1 1, \\
1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1 1 1 1 1, 1 1 1 1 1 1 1 1
1 1 1 1;
\end{verbatim}

\subsection{Signification des données}
Chaque ligne est composée de six types d'informations:
    \begin{itemize}
        \item Le nom du local \texttt{C2-1007} pour le premier local.
        \item La capacité du local \texttt{21} pour le premier local.
        \item La fonction du local \texttt{212} pour le premier
        local.
        \item Liste des caractéristiques 08,11,14,57 pour le premier local.
        Il peut y avoir plusieurs caractéristiques, elles seront séparées par des \texttt{,}
        \item La description du local \texttt{laboratoire de chimie} pour le premier local.
        \item La disponibilité du local. Une séquence du genre \verb!1 1 1 1 1 1 1 1 1 1 1 1!
        représente la disponibilité du local durant une journée.
        Le séparateur virgule \verb!,! sépare la disponibilité d'une journée à celle d'une autre. Le nombre de
périodes de la disponibilité est égal au nombre de périodes d'une journée de la
grille horaire.
    \end{itemize}

\section{Données relatives aux activités}

Le cinquième type de données du fichier $.dia$  contient des
informations concernant les cours offerts à une session. Nous y
retrouvons la liste des activités associées, l'agencement du
cours, le nom de l'enseignant qui le donnera, etc.

\subsection{Exemple des données qu'il contient}


\begin{verbatim}
AMC6552  01
1
1
NEAIME, SAMIR F. ;
1
3
3.3.1
0
------
1
1
1 ;1
AMC9001  01
1
1
ST-AMANT, RENÉ : NEAIME, SAMIR F. : RGR; ST-AMANT, RENÉ ;
2
3 3
3.1.1 3.2.1
1 1
C1-5012 C1-5012
0 0
0  0
1 1 ;1 1
\end{verbatim}


\subsection{Signification des données}

Il existe douze types de lignes :

\begin{enumerate}
    \item L'identification du cours;
    \item L'état du cours (actif ou inactif);
    \item Le nombre d'activités associées au cours;
    \item Le bloc d'enseignants du cours. 1 bloc d'enseignants = un ou plusieurs enseignants séparés par «~:~». Si l'activité a plus d'un bloc, il y'aura autant de blocs d'enseignants qu'il y'aura de blocs et les noms des enseignants seront séparés par des «~;~».\\
\textbf{Exemple:}\\
L'activité \verb!AMC9001  01! possède deux bloc. l'information sur les enseignants est représentée par la ligne: \\ \verb!ST-AMANT, RENÉ : NEAIME, SAMIR F. : RGR; ST-AMANT, RENÉ ;!\\
Ceci indique que le premier bloc de l'activité est donné par les enseignants \verb!ST-AMANT, RENÉ! et \verb! NEAIME, SAMIR F.!  et \verb! RGR!; tandis que le second bloc est donné par l'enseignant \verb!ST-AMANT, RENÉ!

    \item Le nombre de blocs d'activité;
    \item La durée de chacun des blocs identifiés à la ligne précédente;
    \item La période à laquelle le ou les blocs sont placés. La période est sous la forme $a.b.c$ où $a$ représente le jour, $b$ représente la séquence et $c$ représente la période;
    \item l'état du local affecté à chaque unité (fixé ou non fixé);
    \item le nom du local assigné à chaque unité;
    \item le type de locaux requis à chaque unité;
    \item le type de locaux requis à chaque unité;
    \item Cette ligne possède deux types d'informations séparées par le «~;~». Le premier type d'information indique l'état figé (1) ou non (0) du bloc, tandis que le second type indique l'état placé (1) ou non (0) du bloc.
\end{enumerate}

\section{Données relatives aux étudiants}

Le sixième type du fichier $.dia$ représente les choix de cours des étudiants.

\subsection{Exemple des données qu'il contient}

\begin{verbatim}
004
022515472365000420031MERCIER B06
GEL410101;0 GEN400101;0 GIF400101;0 GIF420101;0 GIF430101;0 GIF440101;0
022519582145000520031BERGERON 06
GEL400101;0 GEL410101;0 GEL420101;0 GEL430101;0 GEL440101;0 GEN400101;0
915965442120000520023MARTINEAU05
GCH106101;0 GCH106201;0 GCH205101;0 GCH205201;0 GCH210101;0
965509672135000620012NGUYEN TH07
GCI200101;0 GCI200201;0 GCI220101;1 GCI220201;0 GCI600101;0
GCI600201;0 GIN600101;0
\end{verbatim}

\subsection{Signification des données}

Il existe trois types de lignes :

\begin{enumerate}
    \item Nombre d'étudiants dans le fichier;
    \item Identification de l'étudiant et nombre de cours qu'il prend;
    \item L'identification de cours que l'étudiant suit. Cette identification possède deux types d'informations séparées par le «~;~».
    \begin{itemize}
    \item Le premier type, soit \verb!GEL410101! dans le cas du premier étudiant.
    Les 6 premiers caractères (\verb!GEL410!) correspondent au numéro
    du cours. Le septième caractère (\verb!1!) correspond à la nature ou type d'activité
    du cours (1=Leçon Magistrale et 2=autre). Le 2 derniers caractères
    (\verb!01!) correspondent au groupe d'activité dans lequel l'étudiant est assigné.
    \item Le second type indique si l'étudiant est figé (1) ou non (0) dans le groupe auquel il est assigné.
    \end{itemize}
\end{enumerate}
